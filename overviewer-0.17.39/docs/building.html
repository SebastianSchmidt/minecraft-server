
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Building the Overviewer from Source &#8212; Overviewer 0.13 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Running the Overviewer" href="running.html" />
    <link rel="prev" title="Installing" href="installing.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="running.html" title="Running the Overviewer"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installing.html" title="Installing"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Overviewer 0.13 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Building the Overviewer from Source</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="building-the-overviewer-from-source">
<h1>Building the Overviewer from Source<a class="headerlink" href="#building-the-overviewer-from-source" title="Permalink to this headline">¶</a></h1>
<p>These instructions are for building the C extension for Overviewer. Once you
have finished with these instructions, head to <a class="reference internal" href="running.html"><span class="doc">Running the Overviewer</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pre-built Windows and Debian executables are available on the
<a class="reference internal" href="installing.html"><span class="doc">Installing</span></a> page.  These kits already contain the compiled code and
require no further setup, so you can skip to the next section of the docs:
<a class="reference internal" href="running.html"><span class="doc">Running the Overviewer</span></a>.</p>
</div>
<section id="get-the-source">
<h2>Get The Source<a class="headerlink" href="#get-the-source" title="Permalink to this headline">¶</a></h2>
<p>First step: download the platform-independent source! Either clone with Git
(recommended if you know Git) or download the most recent snapshot:</p>
<ul class="simple">
<li><p>Git URL to clone: <code class="docutils literal notranslate"><span class="pre">git://github.com/overviewer/Minecraft-Overviewer.git</span></code></p></li>
<li><p><a class="reference external" href="https://github.com/overviewer/Minecraft-Overviewer/tarball/master">Download most recent tar archive</a></p></li>
<li><p><a class="reference external" href="https://github.com/overviewer/Minecraft-Overviewer/zipball/master">Download most recent zip archive</a></p></li>
</ul>
<p>Once you have the source, see below for instructions on building for your
system.</p>
</section>
<section id="build-instructions-for-various-operating-systems">
<h2>Build Instructions For Various Operating Systems<a class="headerlink" href="#build-instructions-for-various-operating-systems" title="Permalink to this headline">¶</a></h2>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#windows-build-instructions" id="id1">Windows Build Instructions</a></p>
<ul>
<li><p><a class="reference internal" href="#prerequisites" id="id2">Prerequisites</a></p></li>
<li><p><a class="reference internal" href="#building-with-visual-studio" id="id3">Building with Visual Studio</a></p></li>
<li><p><a class="reference internal" href="#building-with-mingw-w64-and-msys2" id="id4">Building with mingw-w64 and msys2</a></p></li>
<li><p><a class="reference internal" href="#building-with-mingw" id="id5">Building with mingw</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#linux" id="id6">Linux</a></p></li>
<li><p><a class="reference internal" href="#macos" id="id7">macOS</a></p></li>
</ul>
</div>
<section id="windows-build-instructions">
<h3><a class="toc-backref" href="#id1">Windows Build Instructions</a><a class="headerlink" href="#windows-build-instructions" title="Permalink to this headline">¶</a></h3>
<p>First, you’ll need a compiler.  You can either use Visual Studio, or
cygwin/mingw. The free <a class="reference external" href="https://www.visualstudio.com/vs/community/">Visual Studio Community</a> is okay. You will need to select the “Desktop Development with C++” WORKLOAD. Microsoft has been changing up the names on this with the “Community” edition of Visual Studio. If nothing else works, just install every Individual Visual C++ component you can find :)</p>
<section id="prerequisites">
<h4><a class="toc-backref" href="#id2">Prerequisites</a><a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h4>
<p>You will need the following:</p>
<ul>
<li><p><a class="reference external" href="https://www.python.org/downloads/windows/">Python 3.x</a></p></li>
<li><p>A copy of the <a class="reference external" href="https://github.com/python-pillow/Pillow">Pillow sources</a>.</p></li>
<li><p>The Pillow Extension for Python.</p></li>
<li><p>The Numpy Extension for Python.</p></li>
<li><p>The extensions can be installed via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">:</span>\<span class="n">python37</span>\<span class="n">python</span><span class="o">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="o">-</span><span class="n">U</span> <span class="n">numpy</span> <span class="n">pillow</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="building-with-visual-studio">
<h4><a class="toc-backref" href="#id3">Building with Visual Studio</a><a class="headerlink" href="#building-with-visual-studio" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p>Get the latest Overviewer source code as per above.</p></li>
<li><p>From the Start menu, navigate to ‘Visual Studio 2017’ and open the <strong>‘Developer Command Prompt for VS 2017’</strong> (<em>or whatever year</em>) shortcut. A regular command or powershell prompt will <em>NOT</em> work for this.</p></li>
<li><p>cd to the folder containing the Overviewer source code.</p></li>
<li><p>Copy Imaging.h and ImPlatform.h from your Pillow sources into the current working directory.</p></li>
<li><p>First try a build:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">:</span>\<span class="n">python37</span>\<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span>
</pre></div>
</div>
</li>
</ol>
<p>If you encounter the following errors:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">error</span><span class="p">:</span> <span class="n">Unable</span> <span class="n">to</span> <span class="n">find</span> <span class="n">vcvarsall</span><span class="o">.</span><span class="n">bat</span>
</pre></div>
</div>
<p>then try the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span> <span class="n">DISTUTILS_USE_SDK</span><span class="o">=</span><span class="mi">1</span>
<span class="nb">set</span> <span class="n">MSSdk</span><span class="o">=</span><span class="mi">1</span>
<span class="n">c</span><span class="p">:</span>\<span class="n">python37</span>\<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span>
</pre></div>
</div>
<p>If the build was successful, there should be a c_overviewer.pyd file in your current working directory.</p>
</section>
<section id="building-with-mingw-w64-and-msys2">
<h4><a class="toc-backref" href="#id4">Building with mingw-w64 and msys2</a><a class="headerlink" href="#building-with-mingw-w64-and-msys2" title="Permalink to this headline">¶</a></h4>
<p>This is the recommended way to build on Windows without MSVC.</p>
<ol class="arabic">
<li><p>Install msys2 by following <strong>all</strong> the instructions on
<a class="reference external" href="https://msys2.github.io/">the msys2 installation page</a>.</p></li>
<li><p>Install the dependencies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">git</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">python3</span><span class="o">-</span><span class="n">numpy</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">python3</span><span class="o">-</span><span class="n">Pillow</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">python3</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">toolchain</span>
</pre></div>
</div>
</li>
<li><p>Clone the Minecraft-Overviewer git repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">overviewer</span><span class="o">/</span><span class="n">Minecraft</span><span class="o">-</span><span class="n">Overviewer</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>The source code will be downloaded to your msys2 home directory, e.g.
<code class="docutils literal notranslate"><span class="pre">C:\msys2\home\Potato\Minecraft-Overviewer</span></code></p>
</li>
<li><p>Close the msys2 shell. Instead, open the MinGW64 shell.</p></li>
<li><p>Build the Overviewer by changing your current working directory into the source
directory and executing the build script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">Minecraft</span><span class="o">-</span><span class="n">Overviewer</span>
<span class="n">python3</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span>
</pre></div>
</div>
</li>
</ol>
<p>After it finishes, you should now be able to execute <code class="docutils literal notranslate"><span class="pre">overviewer.py</span></code> from the MINGW64
shell.</p>
</section>
<section id="building-with-mingw">
<h4><a class="toc-backref" href="#id5">Building with mingw</a><a class="headerlink" href="#building-with-mingw" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p>Open a MinGW shell.</p></li>
<li><p>cd to the Overviewer directory.</p></li>
<li><p>Copy Imaging.h and ImPlatform.h from your Pillow sources into the current working directory.</p></li>
<li><p>Build:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">compiler</span><span class="o">=</span><span class="n">mingw32</span>
</pre></div>
</div>
</li>
</ol>
<p>If the build fails with complaints about <code class="docutils literal notranslate"><span class="pre">-mno-cygwin</span></code>, open the file <code class="docutils literal notranslate"><span class="pre">Lib/distutils/cygwincompiler.py</span></code>
in an editor of your choice, and remove all mentions of <code class="docutils literal notranslate"><span class="pre">-mno-cygwin</span></code>. This is a bug in distutils,
filed as <a class="reference external" href="http://bugs.python.org/issue12641">Issue 12641</a>.</p>
</section>
</section>
<section id="linux">
<h3><a class="toc-backref" href="#id6">Linux</a><a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h3>
<p>You will need the gcc compiler and a working build environment. On Ubuntu and
Debian, this can be done by installing the <code class="docutils literal notranslate"><span class="pre">build-essential</span></code> package.</p>
<p>You will need the following packages on Debian-derived distributions (e.g. Ubuntu):</p>
<ul class="simple">
<li><p>python3-pil or python3-pillow (the latter is usually aliased to the former)</p></li>
<li><p>python3-dev</p></li>
<li><p>python3-numpy</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you choose to install pillow through pip instead of your distribution’s package
manager, you won’t get the pillow headers which Overviewer requires to build its C
extension. In that case, you should manually download the header files specific to
the version of pillow you installed, and point at them with the <code class="docutils literal notranslate"><span class="pre">PIL_INCLUDE_DIR</span></code>
environment variable. A version mismatch between the installed pillow library and
the headers can lead to segfaults while running Overviewer due to an ABI mismatch.</p>
</div>
<p>Then to build:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span>
</pre></div>
</div>
<p>At this point, you can run <code class="docutils literal notranslate"><span class="pre">./overviewer.py</span></code> from the current directory, so to run it you’ll have to be in this directory and run <code class="docutils literal notranslate"><span class="pre">./overviewer.py</span></code> or provide the the full path to <code class="docutils literal notranslate"><span class="pre">overviewer.py</span></code>.  Another option would be to add this directory to your <code class="docutils literal notranslate"><span class="pre">$PATH</span></code>.   Note that there is a <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">setup.py</span> <span class="pre">install</span></code> step that you can run which will install things into <code class="docutils literal notranslate"><span class="pre">/usr/local/bin</span></code>, but this is strongly not recommended as it might conflict with other installs of Overviewer.</p>
</section>
<section id="macos">
<h3><a class="toc-backref" href="#id7">macOS</a><a class="headerlink" href="#macos" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Install the Xcode Command Line Tools by running the following command in a terminal (located in your /Applications/Utilities folder):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xcode</span><span class="o">-</span><span class="n">select</span> <span class="o">--</span><span class="n">install</span>
</pre></div>
</div>
</li>
<li><p>Install Python 3 if you don’t already have it, for example from <a class="reference external" href="https://www.python.org/downloads/mac-osx/">the official Python website</a>.</p></li>
<li><p>Install PIP, e.g. with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">easy_install</span> <span class="n">pip</span>
</pre></div>
</div>
</li>
<li><p>Install Pillow (overviewer needs PIL, Pillow is a fork of PIL that provides the same functionality):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">Pillow</span>
</pre></div>
</div>
</li>
<li><p>Download the Pillow source files from <a class="reference external" href="https://github.com/python-pillow/Pillow/releases/latest">https://github.com/python-pillow/Pillow/releases/latest</a> and unpack the tar.gz file and move it to a directory you can remember</p></li>
<li><p>Download the Minercaft Overviewer source-code from <a class="reference external" href="https://overviewer.org/builds/overviewer-latest.tar.gz">https://overviewer.org/builds/overviewer-latest.tar.gz</a></p></li>
<li><p>Extract overviewer-[Version].tar.gz and move it to a directory you can remember</p></li>
<li><p>Go into your Pillow-[Version] folder and navigate to the /src/libImaging directory</p></li>
<li><p>Drag the following files from the Pillow-[Version]/src/libImaging folder to your overviewer-[Version] folder:</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Imaging.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ImagingUtils.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ImPlatform.h</span></code></p></li>
</ul>
</div></blockquote>
<ol class="arabic">
<li><p>Make sure your installation of Python 3 is in <code class="docutils literal notranslate"><span class="pre">$PATH</span></code></p></li>
<li><p>In a terminal, change your current working directory to your overviewer-[Version] folder (e.g. by using <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">Desktop/overviewer-[Version]</span></code>)</p></li>
<li><p>Build:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span>
</pre></div>
</div>
</li>
</ol>
<p>You should now be able to run Overviewer with <code class="docutils literal notranslate"><span class="pre">./overviewer.py</span></code> inside of the
Overviewer directory.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Building the Overviewer from Source</a><ul>
<li><a class="reference internal" href="#get-the-source">Get The Source</a></li>
<li><a class="reference internal" href="#build-instructions-for-various-operating-systems">Build Instructions For Various Operating Systems</a><ul>
<li><a class="reference internal" href="#windows-build-instructions">Windows Build Instructions</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#building-with-visual-studio">Building with Visual Studio</a></li>
<li><a class="reference internal" href="#building-with-mingw-w64-and-msys2">Building with mingw-w64 and msys2</a></li>
<li><a class="reference internal" href="#building-with-mingw">Building with mingw</a></li>
</ul>
</li>
<li><a class="reference internal" href="#linux">Linux</a></li>
<li><a class="reference internal" href="#macos">macOS</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installing.html"
                        title="previous chapter">Installing</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="running.html"
                        title="next chapter">Running the Overviewer</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/building.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="running.html" title="Running the Overviewer"
             >next</a> |</li>
        <li class="right" >
          <a href="installing.html" title="Installing"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Overviewer 0.13 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Building the Overviewer from Source</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2010-2019 The Overviewer Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.1.2.
    </div>
  </body>
</html>